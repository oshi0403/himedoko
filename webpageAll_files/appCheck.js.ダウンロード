//---------------------------------------------
// アプリがインストール済みか確認
//---------------------------------------------
// アプリ起動URLスキームを設定
//{-- ChromeForAndroid独自スキーム対応 @ EXCEED 2014/03/25
// ↓ ヘブン女の子MPリニューアル２次 2015/03/31
function appExistChk (app_scheme, store, message, base_url, auth, env) {
//function appExistChk (app_scheme, store, message, base_url, auth) {
//↑ ヘブン女の子MPリニューアル２次 2015/03/31

	var ua = navigator.userAgent.toLowerCase();
//↓ ヘブン女の子MPリニューアル２次 2015/03/31
// ↓ ヘブン女の子MPリニューアル２次 2015/04/02
// ↓ iOS9対応 2015/09/15
	var iosv = null;
	if(ua.indexOf("iphone") != -1 || ua.indexOf("ipod") != -1){
		ua.match(/iphone os (\w+){1,3}/g);
		var iosv=(RegExp.$1.replace(/_/g, '')+'00').slice(0,3);
	}

	if(ua.indexOf("ipad") != -1){
		ua.match(/cpu os (\w+){1,3}/g);
		var osv=(RegExp.$1.replace(/_/g, '')+'00').slice(0,3);
	}

//	if(ua.indexOf("iphone") != -1 || ua.indexOf("ipod") != -1 || ua.indexOf("ipad") != -1){
	if(iosv !== null && iosv >= 600) {
// ↑ iOS9対応 2015/09/15
		auth = encodeURIComponent(auth);
	}
// ↑ ヘブン女の子MPリニューアル２次 2015/04/02
	var url_scheme = app_scheme + 'start?url=' + base_url+ '&auth=' + auth + '&env=' + env;
//	var url_scheme = app_scheme + 'start?url=' + base_url+ '&auth=' + auth;
//↑ ヘブン女の子MPリニューアル２次 2015/03/31

	// ChromeForAndroidの場合はChrome独自スキームで呼び出す
	if(ua.indexOf("android") != -1 && ua.indexOf("chrome") != -1){
// ↓ ヘブン女の子MPリニューアル２次 2015/03/31
	  location.href = 'intent:///start?url=' + base_url + '&auth=' + auth + '&env=' + env + '#Intent;scheme=girlmypage;package=com.surprisecrew_web.girlmypage;end';
//		location.href = 'intent:///start?url=' + base_url + '&auth=' + auth + '#Intent;scheme=girlmypage;package=com.surprisecrew_web.girlmypage;end';
// ↑ ヘブン女の子MPリニューアル２次 2015/03/31
// ↓ iOS9対応 2015/09/15
	} else if(canUseUniversalLinks(iosv)) {
		launchAppByUniversalLinks(url_scheme, store, message);
// ↑ iOS9対応 2015/09/15
	} else {
		launchApp(url_scheme, store, message);
	}
};
//}-- ChromeForAndroid独自スキーム対応 @ EXCEED 2014/03/25

// アプリを起動
function launchApp (scheme, url, message) {
	launch_frame.document.location.href = scheme;
};

// ↓ iOS9対応 2015/09/15
function canUseUniversalLinks(iosv) {
	if(iosv >= 900) {
		return true;
	}

	return false;
};
// アプリを起動
function launchAppByUniversalLinks (scheme, url, message) {
	// TODO UniversalLinks
	location.href = scheme;
};
// ↑ iOS9対応 2015/09/15

// ストアへ移動
function launchStore (url) {
	location.href = url;
};
